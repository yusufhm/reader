!function(t){function e(e){for(var r,u,o=e[0],l=e[1],s=e[2],f=0,d=[];f<o.length;f++)u=o[f],i[u]&&d.push(i[u][0]),i[u]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);for(c&&c(e);d.length;)d.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var l=n[o];0!==i[l]&&(r=!1)}r&&(a.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},i={0:0},a=[];function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var s=0;s<o.length;s++)e(o[s]);var c=l;a.push([19,1]),n()}([,,function(t,e,n){"use strict";n.r(e);var r=n(3),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=i.a},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={components:{WelcomeMessage:((r=n(25))&&r.__esModule?r:{default:r}).default}};e.default=i},function(t,e,n){"use strict";n.r(e);var r=n(5),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=i.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={props:{name:{type:String,required:!0}}};e.default=r},function(t,e,n){"use strict";n.r(e);var r=n(7),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=i.a},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={components:{Title:((r=n(27))&&r.__esModule?r:{default:r}).default},props:{auth:{type:Object,required:!0},authenticated:{type:Boolean,required:!0}},data:function(){return{loading:!1,titles:null,titleKeys:null,error:null}},created:function(){var t=this;this.authenticated&&this.fetchData(),this.auth.authNotifier.on("authChange",function(e){e.authenticated&&t.fetchData()})},methods:{fetchData:function(){this.error=this.titles=null,this.loading=!0;var t=this;fetch("https://api.tools.yusufhm.info/v1/title",{headers:{Authorization:"Bearer "+this.auth.accessToken}}).then(function(t){return t.ok?t.json():t.text()}).then(function(e){t.loading=!1,'"Unauthorised!"'===e?t.error="You are not authorised to view this page.":(t.titles=e,t.titleKeys=Object.keys(t.titles))}).catch(function(t){return console.error(t)})}}};e.default=i},function(t,e,n){"use strict";n.r(e);var r=n(9),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=i.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={props:{auth:{type:Object,required:!0},name:{type:String,required:!0},url:{type:String,required:!0},lastRead:{type:String,required:!0},latestChapter:{type:String,required:!0},newChapters:{type:Array,required:!0}},methods:{markRead:function(t,e,n){fetch("https://api.tools.yusufhm.info/v1/title/"+t,{method:"put",headers:{Authorization:"Bearer "+this.auth.accessToken},body:JSON.stringify({last_read:e})}).then(function(t){if(!t.ok)return t.text();console.log("Updated!")}).catch(function(t){return console.error(t)})}}};e.default=r},function(t,e,n){"use strict";n.r(e);var r=n(11),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=i.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(29))&&r.__esModule?r:{default:r};var a={data:function(){return{auth:i.default,authenticated:i.default.authenticated}},created:function(){var t=this;location.hash.match(/#\/access_token=.*&expires_in=.*&token_type=.*&state=.*&id_token=.*/)&&i.default.handleAuthentication(),i.default.authNotifier.on("authChange",function(e){t.authenticated=e.authenticated}),i.default.renewSession()},methods:{login:function(t){i.default.login()},logout:function(){i.default.logout()}}};e.default=a},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" "),t.authenticated?n("router-link",{attrs:{to:"/reader"}},[t._v("Reader")]):t._e(),t._v(" "),t.authenticated?t._e():n("button",{on:{click:t.login}},[t._v("Login")]),t._v(" "),t.authenticated?n("button",{on:{click:t.logout}},[t._v("Logout")]):t._e(),t._v(" "),n("router-view",{attrs:{auth:t.auth,authenticated:t.authenticated}})],1)},i=[];r._withStripped=!0,n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},function(t,e,n){"use strict";var r=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"full-width center-content"},[e("WelcomeMessage",{attrs:{name:"World"}})],1)},i=[];r._withStripped=!0,n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reader"},[t.loading?n("div",{staticClass:"loading"},[t._v("\n    loading...\n  ")]):t._e(),t._v(" "),t.error?n("div",{staticClass:"errors"},[t._v("\n    "+t._s(t.error)+"\n  ")]):t._e(),t._v(" "),t.titleKeys?n("div",{staticClass:"titles"},t._l(t.titleKeys,function(e){return n("Title",{key:e.id,attrs:{auth:t.auth,name:e,url:t.titles[e].url,"last-read":t.titles[e].last_read,"latest-chapter":t.titles[e].latest_chapter,"new-chapters":t.titles[e].new_chapters}})}),1):t._e()])},i=[];r._withStripped=!0,n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},function(t,e,n){"use strict";var r=function(){var t=this.$createElement;this._self._c;return this._m(0)},i=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h3",[this._v("Welcome")])])}];r._withStripped=!0,n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[n("a",{attrs:{href:t.url,target:"_blank"}},[t._v(t._s(t.name))])]),t._v(" "),n("div",[n("a",{attrs:{href:t.lastRead,target:"_blank"}},[t._v("Last read")])]),t._v(" "),n("div",[n("a",{attrs:{href:t.latestChapter,target:"_blank"}},[t._v("Latest chapter")])]),t._v(" "),t.newChapters.length?n("div",[t._v("\n    New chapters\n    "),n("ul",t._l(t.newChapters,function(e){return n("li",{key:e.id},[n("a",{attrs:{href:e,target:"_blank"}},[t._v(t._s(e))]),t._v(" "),n("button",{on:{click:function(n){t.markRead(t.name,e,n)}}},[t._v("Mark read")])])}),0)]):t._e()])},i=[];r._withStripped=!0,n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(17)),i=o(n(23)),a=o(n(24)),u=o(n(26));function o(t){return t&&t.__esModule?t:{default:t}}r.default.use(i.default);var l=[{path:"*",component:a.default},{path:"/reader",component:u.default}],s=new i.default({routes:l});e.default=s},function(t,e,n){"use strict";var r=u(n(17)),i=u(n(18)),a=u(n(28));function u(t){return t&&t.__esModule?t:{default:t}}n(32),new r.default({el:"#app",router:i.default,render:function(t){return t(a.default)}})},,,,,function(t,e,n){"use strict";n.r(e);var r=n(13),i=n(2);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var u=n(0),o=Object(u.a)(i.default,r.a,r.b,!1,null,null,null);o.options.__file="src/pages/Home.vue",e.default=o.exports},function(t,e,n){"use strict";n.r(e);var r=n(15),i=n(4);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var u=n(0),o=Object(u.a)(i.default,r.a,r.b,!1,null,null,null);o.options.__file="src/components/Home/WelcomeMessage.vue",e.default=o.exports},function(t,e,n){"use strict";n.r(e);var r=n(14),i=n(6);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var u=n(0),o=Object(u.a)(i.default,r.a,r.b,!1,null,null,null);o.options.__file="src/pages/Reader.vue",e.default=o.exports},function(t,e,n){"use strict";n.r(e);var r=n(16),i=n(8);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var u=n(0),o=Object(u.a)(i.default,r.a,r.b,!1,null,null,null);o.options.__file="src/components/Reader/Title.vue",e.default=o.exports},function(t,e,n){"use strict";n.r(e);var r=n(12),i=n(10);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var u=n(0),o=Object(u.a)(i.default,r.a,r.b,!1,null,null,null);o.options.__file="src/App.vue",e.default=o.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n(30)),i=u(n(31)),a=u(n(18));function u(t){return t&&t.__esModule?t:{default:t}}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"accessToken",void 0),l(this,"idToken",void 0),l(this,"expiresAt",void 0),l(this,"authenticated",this.isAuthenticated()),l(this,"authNotifier",new i.default),l(this,"auth0",new r.default.WebAuth({domain:"yusufhm.au.auth0.com",clientID:"JtXGH5XKNUy0K7JZUnLL7jiMFt8jOoj2",redirectUri:this.redirectUri(),responseType:"token id_token",scope:"openid"}))}var e,n,u;return e=t,(n=[{key:"redirectUri",value:function(){return"yusufhm.github.io"===window.location.hostname?window.location.origin+"/reader":window.location.origin}},{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var t=this;this.auth0.parseHash(function(e,n){n&&n.accessToken&&n.idToken?(t.setSession(n),a.default.replace("/")):e&&(a.default.replace("/"),console.log(e))})}},{key:"setSession",value:function(t){this.accessToken=t.accessToken,this.idToken=t.idToken,this.expiresAt=1e3*t.expiresIn+(new Date).getTime(),this.authNotifier.emit("authChange",{authenticated:!0}),localStorage.setItem("loggedIn",!0)}},{key:"renewSession",value:function(){var t=this;this.auth0.checkSession({},function(e,n){n&&n.accessToken&&n.idToken?t.setSession(n):e&&(t.logout(!1),console.log(e))})}},{key:"logout",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.accessToken=null,this.idToken=null,this.expiresAt=null,this.userProfile=null,this.authNotifier.emit("authChange",!1),localStorage.removeItem("loggedIn"),t&&this.auth0.logout({returnTo:window.location.origin,clientID:"JtXGH5XKNUy0K7JZUnLL7jiMFt8jOoj2"}),a.default.replace("/")}},{key:"isAuthenticated",value:function(){return(new Date).getTime()<this.expiresAt&&"true"===localStorage.getItem("loggedIn")}}])&&o(e.prototype,n),u&&o(e,u),t}());e.default=s},,,function(t,e,n){}]);