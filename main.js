!function(t){function e(e){for(var i,o,s=e[0],u=e[1],l=e[2],d=0,f=[];d<s.length;d++)o=s[d],r[o]&&f.push(r[o][0]),r[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);for(c&&c(e);f.length;)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},r={0:0},a=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var c=u;a.push([26,1]),n()}([,,function(t,e,n){"use strict";n.r(e);var i=n(3),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e.default=r.a},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={components:{WelcomeMessage:((i=n(32))&&i.__esModule?i:{default:i}).default}};e.default=r},function(t,e,n){"use strict";n.r(e);var i=n(5),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e.default=r.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{name:{type:String,required:!0}}};e.default=i},function(t,e,n){"use strict";n.r(e);var i=n(7),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e.default=r.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n(17)),r=o(n(34)),a=o(n(35));function o(t){return t&&t.__esModule?t:{default:t}}var s={components:{Loading:i.default,Title:r.default},data:function(){return{titles:this.$store.getters.titles,fetchingTitles:!0,accordions:null}},created:function(){var t=this;this.$store.authenticated&&this.fetchTitles(),this.$store.auth.authNotifier.on("authChange",function(e){e.authenticated&&t.fetchTitles()})},methods:{fetchTitles:function(){var t=this;this.$store.dispatch("fetchTitles").then(function(){t.titles=t.$store.getters.titles,t.fetchingTitles=!1,t.$nextTick(function(){this.accordions=a.default.attach()})})}}};e.default=s},function(t,e,n){"use strict";n.r(e);var i=n(9),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e.default=r.a},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={components:{Loading:((i=n(17))&&i.__esModule?i:{default:i}).default},props:{index:{type:String,required:!0}},data:function(){return{title:this.$store.getters.titles[this.index]}},computed:{editLink:function(){return"/reader/"+this.title.name+"/edit"},fetching:function(){return this.title.fetching},backgroundClass:function(){return this.title&&this.title.new_chapters.length?"has-background-info":"has-background-grey-light"}},methods:{markTitleAsRead:function(t,e,n,i){this.$store.dispatch("markTitleAsRead",{name:e,chapter:n})}}};e.default=r},function(t,e,n){"use strict";n.r(e);var i=n(11),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e.default=r.a},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={components:{Loading:((i=n(17))&&i.__esModule?i:{default:i}).default},data:function(){var t="",e="add";return this.$route.params.name&&(t=this.$route.params.name,e="edit"),{store:this.$store,name:t,op:e,title:this.$store.getters.title(t),formAction:"/#"+this.$route.path}},mounted:function(){var t=this;"edit"===this.op&&this.$store.auth.authNotifier.on("authChange",function(e){e.authenticated&&t.$store.dispatch("fetchTitle",{name:t.name}).then(function(){t.title=t.$store.getters.title(t.name)})})},methods:{save:function(){this.$store.commit("resetError"),"add"===this.op?this.$store.addTitle(this.name,this.title.url,this.title.last_read):"edit"===this.op&&this.$store.dispatch("updateTitle",{name:this.name,url:this.title.url,lastRead:this.title.last_read})}}};e.default=r},function(t,e,n){"use strict";n.r(e);var i=n(13),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e.default=r.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(38));function r(t){return t&&t.__esModule?t:{default:t}}var a={components:{MainNav:r(n(41)).default},data:function(){return{error:this.$store.state.error}},created:function(){var t=this;location.hash.match(/#\/access_token=.*&expires_in=.*&token_type=.*&state=.*&id_token=.*/)&&i.default.handleAuthentication(),i.default.authNotifier.on("authChange",function(e){t.$store.authenticated=e.authenticated}),this.$store.router=this.$router,this.$store.auth=i.default,this.$store.authenticated=i.default.authenticated,i.default.renewSession()}};e.default=a},function(t,e,n){"use strict";n.r(e);var i=n(15),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e.default=r.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={data:function(){return{store:this.$store,mobileMenuActive:!1}},methods:{login:function(t){this.$store.auth.login()},logout:function(){this.$store.auth.logout()},toggleMenu:function(){this.mobileMenuActive=!this.mobileMenuActive}}}},,function(t,e,n){"use strict";n.r(e);var i=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"loading"},[this._v("\n  loading...\n")])};i._withStripped=!0;var r=n(0),a=Object(r.a)({},i,[],!1,null,null,null);a.options.__file="src/components/Loading.vue";e.default=a.exports},function(t,e,n){"use strict";var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("MainNav"),this._v(" "),this.error?e("div",{staticClass:"errors"},[this._v("\n    "+this._s(this.error)+"\n  ")]):this._e(),this._v(" "),e("section",{staticClass:"section"},[e("router-view")],1)],1)},r=[];i._withStripped=!0,n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})},function(t,e,n){"use strict";var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"full-width center-content"},[e("WelcomeMessage",{attrs:{name:"World"}})],1)},r=[];i._withStripped=!0,n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})},function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reader"},[n("div",{staticClass:"actions"},[n("router-link",{staticClass:"button is-link",attrs:{to:"/reader/add"}},[t._v("Add")])],1),t._v(" "),t.fetchingTitles?n("Loading"):t._e(),t._v(" "),!t.fetchingTitles&&t.titles.length?n("div",{staticClass:"accordions"},t._l(Object.keys(t.titles),function(t){return n("Title",{key:t.id,attrs:{index:t}})}),1):t._e()],1)},r=[];i._withStripped=!0,n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})},function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title-form"},[!t.title||t.title.fetching?n("Loading"):t.title?n("form",{attrs:{action:t.formAction,method:"post"},on:{submit:function(t){t.preventDefault()}}},[n("div",{staticClass:"field"},[n("label",{staticClass:"label",attrs:{for:"title-name"}},[t._v("Name")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{id:"title-name",type:"text",name:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label",attrs:{for:"title-url"}},[t._v("Url")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title.url,expression:"title.url"}],staticClass:"input",attrs:{id:"title-url",type:"url",name:"url"},domProps:{value:t.title.url},on:{input:function(e){e.target.composing||t.$set(t.title,"url",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label",attrs:{for:"title-last-read"}},[t._v("Last Read")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title.last_read,expression:"title.last_read"}],staticClass:"input",attrs:{id:"title-last-read",type:"url",name:"url"},domProps:{value:t.title.last_read},on:{input:function(e){e.target.composing||t.$set(t.title,"last_read",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field is-grouped"},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-primary",on:{click:function(e){t.save()}}},[t._v("Save")])]),t._v(" "),n("div",{staticClass:"control"},[n("button",{staticClass:"button",on:{click:function(e){t.store.resetError(),t.store.goBack("/reader")}}},[t._v("Cancel")])]),t._v(" "),n("div",{staticClass:"control"},[n("button",{staticClass:"button is-danger",on:{click:function(e){t.store.resetError(),t.store.deleteTitle(t.name)}}},[t._v("Delete")])])])]):t._e()],1)},r=[];i._withStripped=!0,n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})},function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar"},[n("div",{staticClass:"navbar-brand"},[n("a",{staticClass:"navbar-burger burger",class:{"is-active":t.mobileMenuActive},attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"main-menu"},on:{click:t.toggleMenu}},[n("span",{attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",{attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",{attrs:{"aria-hidden":"true"}})])]),t._v(" "),n("div",{staticClass:"navbar-menu",class:{"is-active":t.mobileMenuActive},attrs:{id:"main-menu"}},[n("div",{staticClass:"navbar-start"},[n("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[t._v("Home")]),t._v(" "),t.store.authenticated?n("router-link",{staticClass:"navbar-item",attrs:{to:"/reader"}},[t._v("\n        Reader\n      ")]):t._e()],1),t._v(" "),n("div",{staticClass:"navbar-end"},[t.store.authenticated?t._e():n("a",{staticClass:"navbar-item",on:{click:t.login}},[t._v("\n        Login\n      ")]),t._v(" "),t.store.authenticated?n("a",{staticClass:"navbar-item",on:{click:t.logout}},[t._v("\n        Logout\n      ")]):t._e()])])])},r=[];i._withStripped=!0,n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})},function(t,e,n){"use strict";var i=function(){var t=this.$createElement;this._self._c;return this._m(0)},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h3",[this._v("Welcome")])])}];i._withStripped=!0,n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})},function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title accordion"},[t.fetching?n("Loading",{staticClass:"card-content content"}):n("header",{staticClass:"accordion-header toggle",class:t.backgroundClass},[n("h2",[n("a",{attrs:{href:t.title.url,target:"_blank"}},[t._v(t._s(t.title.name))])]),t._v(" "),n("span",[t._v(t._s(t.title.new_chapters.length))])]),t._v(" "),t.fetching?t._e():n("main",{staticClass:"accordion-body content"},[n("div",{staticClass:"accordion-content"},[n("div",{staticClass:"actions"},[n("router-link",{staticClass:"button is-link",attrs:{to:t.editLink}},[t._v("Edit")])],1),t._v(" "),n("div",[n("a",{attrs:{href:t.title.last_read,target:"_blank"}},[t._v("Last read")])]),t._v(" "),t.title.latest_chapter?n("div",[n("a",{attrs:{href:t.title.latest_chapter,target:"_blank"}},[t._v("Latest chapter")])]):t._e(),t._v(" "),t.title.new_chapters&&t.title.new_chapters.length?n("div",[n("strong",[t._v("New chapters")]),t._v(" "),n("ul",{staticClass:"new-chapters"},t._l(t.title.new_chapters,function(e){return n("li",{key:e.id},[n("a",{attrs:{href:e,target:"_blank"}},[t._v(t._s(e))]),t._v(" "),n("button",{staticClass:"button",on:{click:function(n){t.markTitleAsRead(t.index,t.title.name,e,n)}}},[t._v("Mark read")])])}),0)]):t._e()])])],1)},r=[];i._withStripped=!0,n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=u(n(16)),r=u(n(30)),a=u(n(31)),o=u(n(33)),s=u(n(36));function u(t){return t&&t.__esModule?t:{default:t}}i.default.use(r.default);var l=[{path:"*",component:a.default},{path:"/reader",component:o.default},{path:"/reader/add",component:s.default},{path:"/reader/:name/edit",component:s.default}],c=new r.default({routes:l});e.default=c},function(t,e,n){"use strict";var i=s(n(16)),r=s(n(25)),a=s(n(37)),o=s(n(42));function s(t){return t&&t.__esModule?t:{default:t}}n(44);new i.default({el:"#app",router:r.default,store:o.default,render:function(t){return t(a.default)}})},,,,,function(t,e,n){"use strict";n.r(e);var i=n(19),r=n(2);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);var o=n(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,null,null);s.options.__file="src/pages/Home.vue",e.default=s.exports},function(t,e,n){"use strict";n.r(e);var i=n(23),r=n(4);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);var o=n(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,null,null);s.options.__file="src/components/Home/WelcomeMessage.vue",e.default=s.exports},function(t,e,n){"use strict";n.r(e);var i=n(20),r=n(6);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);var o=n(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,null,null);s.options.__file="src/pages/Reader.vue",e.default=s.exports},function(t,e,n){"use strict";n.r(e);var i=n(24),r=n(8);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);var o=n(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,null,null);s.options.__file="src/components/Reader/Title.vue",e.default=s.exports},,function(t,e,n){"use strict";n.r(e);var i=n(21),r=n(10);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);var o=n(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,null,null);s.options.__file="src/components/Reader/TitleForm.vue",e.default=s.exports},function(t,e,n){"use strict";n.r(e);var i=n(18),r=n(12);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);var o=n(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,null,null);s.options.__file="src/App.vue",e.default=s.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n(39)),r=o(n(40)),a=o(n(25));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"accessToken",void 0),u(this,"idToken",void 0),u(this,"expiresAt",void 0),u(this,"authenticated",this.isAuthenticated()),u(this,"authNotifier",new r.default),u(this,"auth0",new i.default.WebAuth({domain:"yusufhm.au.auth0.com",clientID:"JtXGH5XKNUy0K7JZUnLL7jiMFt8jOoj2",redirectUri:this.redirectUri(),responseType:"token id_token",scope:"openid"}))}var e,n,o;return e=t,(n=[{key:"redirectUri",value:function(){return"yusufhm.github.io"===window.location.hostname?window.location.origin+"/reader":window.location.origin}},{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var t=this;this.auth0.parseHash(function(e,n){n&&n.accessToken&&n.idToken?(t.setSession(n),a.default.replace("/")):e&&(a.default.replace("/"),console.log(e))})}},{key:"setSession",value:function(t){this.accessToken=t.accessToken,this.idToken=t.idToken,this.expiresAt=1e3*t.expiresIn+(new Date).getTime(),this.authNotifier.emit("authChange",{authenticated:!0}),localStorage.setItem("loggedIn",!0)}},{key:"renewSession",value:function(){var t=this;this.auth0.checkSession({},function(e,n){n&&n.accessToken&&n.idToken?t.setSession(n):e&&(t.logout(!1),console.log(e))})}},{key:"logout",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.accessToken=null,this.idToken=null,this.expiresAt=null,this.userProfile=null,this.authNotifier.emit("authChange",!1),localStorage.removeItem("loggedIn"),t){var e=window.location.origin;"yusufhm.github.io"===window.location.host&&(e=window.location.origin+window.location.pathname),this.auth0.logout({returnTo:e,clientID:"JtXGH5XKNUy0K7JZUnLL7jiMFt8jOoj2"})}a.default.replace("/")}},{key:"isAuthenticated",value:function(){return(new Date).getTime()<this.expiresAt&&"true"===localStorage.getItem("loggedIn")}}])&&s(e.prototype,n),o&&s(e,o),t}());e.default=l},,,function(t,e,n){"use strict";n.r(e);var i=n(22),r=n(14);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);var o=n(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,null,null);s.options.__file="src/components/MainNav.vue",e.default=s.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n(16)),r=a(n(43));function a(t){return t&&t.__esModule?t:{default:t}}i.default.use(r.default);var o=function(t,e){return t.fetching=!1,e.fetching=!1,t.new_chapters.length===e.new_chapters.length?t.name.localeCompare(e.name):e.new_chapters.length-t.new_chapters.length},s=new r.default.Store({state:{error:null,titles:[],titlesFetched:!1,fetchingTitles:!1},router:null,auth:null,authenticated:null,getters:{titles:function(t){return t.titles},title:function(t){return function(e){var n={name:"",url:"",last_read:""};return e&&t.titles.find(function(t){return t.name===e})||n}}},mutations:{setError:function(t,e){t.error=e},resetError:function(t){t.error=null},goBack:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";window.history.length>1?this.router.go(-1):this.router.push(e)},setTitles:function(t,e){e||(e=[],t.titles.forEach(function(t){e.push({fetching:!1,name:t.name,url:t.url,last_read:t.last_read,latest_chapter:t.latest_chapter,new_chapters:t.new_chapters})})),e=e.sort(o),t.titles.length?e.forEach(function(e,n){t.titles[n].fetching=!1,t.titles[n].name=e.name,t.titles[n].url=e.url,t.titles[n].last_read=e.last_read,t.titles[n].latest_chapter=e.latest_chapter,t.titles[n].new_chapters=e.new_chapters}):t.titles=e},setTitle:function(t,e){var n=e.index,i=e.title;null===n&&(n=0),t.titles[n].fetching=!1,t.titles[n].name=i.name,t.titles[n].url=i.url,t.titles[n].last_read=i.last_read,t.titles[n].latest_chapter=i.latest_chapter,t.titles[n].new_chapters=i.new_chapters}},actions:{fetchTitles:function(t){var e=this,n=t.commit,i=t.state,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(t,a){!i.titlesFetched||r?(console.log("Loading all titles..."),fetch("https://api.tools.yusufhm.info/v1/title",{headers:{Authorization:"Bearer "+e.auth.accessToken}}).then(function(t){return t.json()}).then(function(e){i.fetchingTitles=!1,e.message?(n("setError","Unable to fetch titles."),a(new Error(e.message))):(n("setTitles",e),i.titlesFetched=!0,t())}).catch(function(t){return console.error(t)})):t()})},fetchTitle:function(t,e){var n=this,i=t.commit,r=t.state,a=e.name,o=e.refetch,s=void 0!==o&&o;return new Promise(function(t,e){if(console.log("Loading single title..."),n.authenticated){var o=null,u=null;if(r.titlesFetched&&(-1!==(o=r.titles.findIndex(function(t){return t.name===a}))&&((u=r.titles[o]).fetching=!1),!s))return i("setTitle",{index:o,title:u}),void t();u||(u={url:"",last_read:""}),u.fetching=!0,fetch("https://api.tools.yusufhm.info/v1/title/"+a,{headers:{Authorization:"Bearer "+n.auth.accessToken}}).then(function(t){return t.json()}).then(function(n){n.message?(i("setError","Unable to fetch title."),e(new Error(n.message))):(i("setTitle",{index:o,title:u=n}),t())}).catch(function(t){return console.error(t)})}else e(new Error("Not authenticated"))})},addTitle:function(t,e,n){t&&e&&n?fetch("https://api.tools.yusufhm.info/v1/title/"+t,{method:"post",headers:{Authorization:"Bearer "+this.auth.accessToken},body:JSON.stringify({url:e,last_read:n})}).then(function(t){if(!t.ok)return t.text();console.log("Added!")}).catch(function(t){return console.error(t)}):this.state.error="All fields are required!"},updateTitle:function(t,e){var n=this,i=t.dispatch,r=t.commit,a=e.name,o=e.url,s=e.lastRead;return new Promise(function(t,e){if(!a||!o||!s)return r("setError","All fields are required!"),void e(new Error("All fields are required!"));n.state.titles.find(function(t){return t.name===a}).fetching=!0,fetch("https://api.tools.yusufhm.info/v1/title/"+a,{method:"put",headers:{Authorization:"Bearer "+n.auth.accessToken},body:JSON.stringify({url:o,last_read:s})}).then(function(t){t.ok?(console.log("Updated!"),n.router.push("/reader"),i("fetchTitle",{name:a,refetch:!0}).then(function(){return r("setTitles")})):e(new Error(t.text()))}).catch(function(t){return console.error(t)})})},markTitleAsRead:function(t,e){var n=this,i=t.dispatch,r=t.commit,a=e.name,o=e.chapter;return new Promise(function(t,e){n.state.titles.find(function(t){return t.name===a}).fetching=!0,fetch("https://api.tools.yusufhm.info/v1/title/"+a,{method:"put",headers:{Authorization:"Bearer "+n.auth.accessToken},body:JSON.stringify({last_read:o})}).then(function(t){t.ok?(console.log("Updated!"),i("fetchTitle",{name:a,refetch:!0}).then(function(){return r("setTitles")})):e(new Error(t.text()))}).catch(function(t){return console.error(t)})})},deleteTitle:function(t){var e=this;console.log("Deleting ".concat(t)),confirm("Proceed with deletion?")&&fetch("https://api.tools.yusufhm.info/v1/title/"+t,{method:"delete",headers:{Authorization:"Bearer "+this.auth.accessToken}}).then(function(n){if(!n.ok)return n.text();console.log("Deleted!"),delete e.state.titles[t],e.router.push("/reader")}).catch(function(t){return console.error(t)})}}});e.default=s},,function(t,e,n){}]);